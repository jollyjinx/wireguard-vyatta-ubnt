multi:
priority: 460 # Run after interface has been configured
type: ipv4net,ipv6net
val_help: ipv4net; IPv4 address and prefix length
val_help: ipv6net; IPv6 address and prefix length
help: IP address

syntax:expression: exec "/opt/vyatta/sbin/valid_address $VAR(@)"

commit:expression: exec "sudo /opt/vyatta/sbin/vyatta-interfaces.pl --valid-addr-commit $VAR(@@) --dev $VAR(../@)"

create:
        echo $(date|sed -e 's/\n//;') "wireguard/node.tag/address/node.def: create:action: $COMMIT_ACTION arg: $VAR(@)" >> /tmp/wg.log
        sudo /opt/vyatta/sbin/vyatta-address add $VAR(../@) $VAR(@)

delete:
        echo $(date|sed -e 's/\n//;') "wireguard/node.tag/address/node.def: create:action: $COMMIT_ACTION arg: $VAR(@)" >> /tmp/wg.log
        sudo /opt/vyatta/sbin/vyatta-address delete $VAR(../@) $VAR(@)


begin:  echo $(date|sed -e 's/\n//;') "wireguard/node.tag/address/node.def: begin:action: $COMMIT_ACTION arg: $VAR(@)" >> /tmp/wg.log

end:    echo $(date|sed -e 's/\n//;') "wireguard/node.tag/address/node.def: end:action: $COMMIT_ACTION arg: $VAR(@)" >> /tmp/wg.log

